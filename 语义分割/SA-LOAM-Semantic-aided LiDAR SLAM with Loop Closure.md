>论文标题：SA-LOAM: Semantic-aided LiDAR SLAM with Loop Closure  
发表时间：2021  
研究组织：浙江大学  
本文标签：语义分割、LiDAR、SLAM、ICRA  


# 速读概览：
## 1.针对什么问题？ 
LiDAR SLAM中的回环检测问题。
## 2.采用什么方法？  
采用语义辅助检测。
## 3.达到什么效果？  
在 KITTI 和 Ford Campus 数据集上进行的实验表明，与最先进的方法相比，我们的系统实现了具有竞争力的性能，并且通常可以大幅度提高基线的准确性。
## 4.存在什么不足？



# 论文精读
## 0.摘要
基于雷达的SLAM系统是公认地要比其他的系统更加准确和稳定，但它的闭环检测始终是一个尚未解决的问题。随着点云3D语义分割技术的发展，语义信息的获取更加的方便稳定，对于高级智能来说必不可少，也有利于SLAM。本文中，我们提出了一个基于LOAM的具有闭环的语义辅助的新型LiDAR SLAM，并将其命名为SA-LOAM，它利用了视觉里程计中的语义和回环检测。具体来说，我们提出了一种语义辅助ICP，包括语义匹配、下采样和平面约束，并在我们的闭环检测模块中整合了一种基于语义图的位置识别方法。受益于语义，我们能提高定位精度、高效检测闭环、在大规模场景中也能构建的全局一致的语义地图。在KITTI和Ford Campus数据集上的大量实验表明，与最新的方法相比，我们的系统显著提升了基线性能，具有对未知数据的泛化能力，并实现了更具竞争力的成果。


## 1.介绍
* 相比于相机，LiDAR可以直接获得精确的距离测量，并且不受光照变化的影响，因此基于LiDAR的SLAM系统更加稳定和精确。
* LOAM是最先进的基于LiDAR的SLAM系统。也出现了很多提高其性能的方法。但由于缺乏实用的闭环检测模块，大多数不能消除累计误差并构建全局一致地图。此外，他们在低级原语上运行，这不是和可靠地执行高级指令，如“在树旁边停车”。机器人需要把语义概念转换成空间表示，维护超越由传统的SLAM构建的地图的高质量的语义地图。
* 深度学习的发展使得语义信息能够方便地从图像中获得，这已被用于辅助SLAM，如去除动态物体或者支持辅助姿态估计。
* 与图像不同，LiDAR点云是稀疏的、非结构化且缺少纹理细节的，但是有精确的3D空间表示。近来，一些研究将语义引入纯LiDAR SLAM系统。
* SLOAM是专为森林清查而设计的，而SUMA++是一种基于面元的方法，在高速公路场景中的动态清除实现了惊人的精度。但完整的基于LiDAR 的语义SLAM系统仍然很少。
* 为了解决上述问题，本文提出了SA-LOAM。具体来说，我们在名为FLOAM的开源基于LOAM的SLAM系统上构建了一个语义辅助的ICP和基于语义图的回环检测模块。在我们的语义辅助ICP中，实现了基于语义的聚类、下采样和平面约束，以减少错误匹配，平衡效率和准确性，并去除错误的平面特征以提高配准质量。我们的闭环检测基于我们之前的工作，它将3D场景转换为语义图，并通过匹配网络获得场景相似度。我们将其与回环候选生成、几何验证相结合，并维护一个轻量级语义图，以实现高效和稳健的回环闭合检测。
* 本文贡献：
  * 本文提出了一个完整的基于LiDAR的语义SLAM系统，即使在大规模场景中也能够构建一个全局一致语义地图。
  * 我们提出了一种基于LOAM的语义辅助ICP方法，它充分利用了语义并提高了里程计的准确性。
  * 我们在系统中集成了基于语义的闭环检测，并维护了能够高效检测回环并消除累积误差的地图。
  * 在 KITTI 和 Ford Campus 数据集上进行的实验表明，与最先进的方法相比，我们的系统实现了具有竞争力的性能，并且通常可以大幅度提高基线的准确性。


## 2.相关工作
### A.LiDAR SLAM
* 为了估计自我运动，LOAM从原始点云中提取边缘和平面特征，然后最小化点到线和点到平面的距离。尽管LOAM是在2014年提出的，但在纯基于LiDAR的方法中，LOAM在KITTI里程计基准测试中继续名列前茅。
* LeGO-LOAM分割原始点云，过滤小簇，并通过两步 Levenberg-Marquardt 优化方法估计姿态。虽然它可以过滤一些动态物体，但是许多静态物体也被去除掉了，导致有用的特征丢失。
* IMLS-SLAM使用扫描建模框架，利用隐式移动最小二值法（IMLS）重建平面，并最小化点到IMLS表面的距离。但由于计算IMLS的过程缓慢，无法实现实时性能。
* 最近，一些研究人员结合语义信息来辅助点云注册。Zaganidis等人使用语义信息来扩展正态分布变换（NDT）和广义迭代最近点（GICP）。SLOAM使用语义分割来检测树干和地面，然后分别建模，在森林场景中取得了很好的效果。SUMA是一种基于surfel 的闭环方法，SUMA++用语义对其进行了扩展，以过滤掉动态对象，实现了最先进的性能。

### B.基于雷达的闭环
* 现有的基于 LiDAR 的回环检测方法可以分为局部、全局和基于分段的方法。
* 局部描述符方法通常为每个特征点定义一个局部参考系，然后他们使用点分布信息来描述特征。
* FPFH使用法线来构建关键点的直方图，有效地描述了每个关键点周围的局部几何形状。然而，这样的局部特征不足以区分相似的局部结构。
* 全局描述符是从整个 LiDAR 扫描中产生的。 M2DP将3D点投影到一系列2D平面，生成特征矩阵并将奇异向量视为全局特征。Scan Context、LocNet和ISC将3D点云转换为2D图像表示，然后比较这些2D图像以找到循环。 PointNetVLAD、SeqLPD和 LPD-Net使用 PointNet、提取点特征，并通过 NetVLAD聚合全局特征。 OverlapNet将3D点投影到包含多个线索（例如，范围、法线、强度和语义）的范围图像，然后使用孪生网络计算输入扫描之间的重叠分数。这些方法通常对视点变化和点的部分丢失很敏感。
* SegMatch将点云分成不同的元素，提取它们的特征，并通过随机森林算法匹配相应的元素。SegMap使用3D CNN来学习3D点云段的描述符。受益于语义的鲁棒性，我们之前的工作对点云进行语义分割并将它们构建为语义图，将语义对象视为图节点。
* 采用图相似性网络来捕获他们的关系并获得图对的相似性分数。这与人类的感知更相似，在语义或对象级别操作对遮挡和视点变化更稳健，尤其是反向闭环检测中。

## 3.方法
### A.系统概述
* 与现有的侧重于在注册中融合语义的方法不同，我们探索了语义在我们的系统中的更多的应用，主要包括语义辅助ICP和基于语义图的闭环检测。
* 我们的方法流程如下。原始点云P首先被送入现成的语义分割方法以获得具有逐点类标签$l\in L$的语义点云S，L是语义类别的数量。然后将S发送到里程计估计模块以提取平坦的平面特征和锐利的边缘特征，这些特征稍后将通过注册到本地地图来估计里程计。同时，语义点云图S被转化为语义图表示G，并将进一步输入到回环检测模块。当检测到闭环时，我们将更新姿势图并优化姿势。因此，我们可以增量地获得高质量的全局语义图M。

### B.语义辅助ICP
* LOAM使用边缘和平面特征来注册点云，实现准确快速的定位和建图。我们通过语义信息扩展了这个方法，具体改进如下：
  * 首先，受SE-NDT的启发，我们分别通过语义标签和注册来划分特征，降低错误匹配的概率。
  * 其次，我们根据语义标签分别对点云进行下采样。大多数现有方法通过体素网格过滤对点云进行下采样以提高效率。然而，一些包含有用信息的小对象将不可避免地被过滤掉。我们基于语义的下采样对不同种类的对象使用不同的采样率，可以有效的保持小对象的信息。
  * 最后，我们利用语义来约束平面拟合。基于地平面应平行于水平面并垂直于建筑表面的假设，我们可以去除拟合不佳的平面。
* 特征提取。我们采用LOAM的特征提取策略。具体来说，我们从点云中提取边缘和平面特征，并通过以下方式计算每个点的粗糙度：
$$roughness = \frac{1}{n\left \| p_i \right \|}\left \| \sum_{j=1,j\ne i}^n(p_j-p_i) \right \| \tag{1}$$
  其中，$p_i$表示目标点，$p_j$在同一个环中。使用阈值$\alpha$将这些点划分为边缘点（粗糙度大于$\alpha$）和平面点（粗糙度小于$\alpha$）。为了均匀采样，每个环被分成$N_r$个部分。我们选择$N_e$个最尖锐的点作为边缘特征，$N_p$个最平坦的点作为每个部分的平面特征。最后，我们得到整个目标帧的边缘特征点$C_e$和平面特征点$C_p$。
* 运动估计。为了估计LiDAR的自我运动，我们最小化目标边缘特征点到其对应线的距离以及目标平面特征点到其对应平面的距离。由于不同的语义类具有不同的含义，这些含义应该有助于区分定位，因此我们将与语义相关的权重$w^l$附加到每个错误项。我们的总体优化目标是：
$$r = \sum_{l}^L{\sum_{i}(w^ld_{ei}^l)+\sum_{j}(w^ld_{pj}^l)}\tag{2}$$
  其中，$d_{ei}^l$是第i个边缘特征点$c_{ei}^l \in C_e$到其对应线的距离，$d_{pj}^l$是第j个平面特征点$c_{pj}^l \in C_p$到其对应平面的距离。$l\in L$是目标特征点的语义标签，$w^l$是语义相关的权重。
* 我们首先使用最近的$N_m$帧的边缘特征点$C_e$

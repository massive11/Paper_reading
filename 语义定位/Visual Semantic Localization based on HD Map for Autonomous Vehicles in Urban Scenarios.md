>论文标题：Visual Semantic Localization based on HD Map for Autonomous Vehicles in Urban Scenarios  
发表时间：2021  
研究组织：Noah's Lab, Huawei    
本文标签：语义定位、视觉导航、ICRA


# 速读概览：
## 1.针对什么问题？ 

## 2.采用什么方法？  

## 3.达到什么效果？  

## 4.存在什么不足？



# 论文精读
## 0.摘要
* 高准确率和强大的定位能力对城市场景中的自动驾驶汽车来说至关重要。传统的基于视觉的方法在光照、季节、视角和外观变化的条件下会失效。
* 本文提出了一个基于高清地图和紧凑表示的语义特征的新型视觉语义定位算法。语义特征广泛出现在城市道路上，并且对光照、天气、视角和外观变化比较鲁棒。重复性的结构、漏检和误检使数据关联 (DA) 非常模糊。为此，执行了一种考虑局部结构一致性、全局模式一致性和时间一致性的鲁棒 DA 方法。 此外，我们引入了一个滑动窗口因子图优化框架来融合关联和里程计测量，而无需地图特征的高精度绝对高度信息。
* 我们在模拟和真实的城市道路上都评估了我们提出的定位框架。实验表明，本文提出的方法能够实现高精度定位，平均纵向误差为 0.43m，平均横向误差为 0.12m，平均偏航角误差为 0.11°。

## 1.Introduction
* 高精度定位对自动驾驶汽车（AVs）来说是一项重要技术，因为如决策制定、规划与控制等多个模块都非常依赖定位。为了实现精确的定位，AVs装备上了如GNSS、相机、LiDAR、IMU以及轮式编码器等多种传感器。由于LiDAR的高昂费用，低成本的相机和IMU对于商用级别的AVs的定位来说更加合适。
* 城市场景中存在各种复杂的路况，如城市峡谷、隧道、高架桥等，这对自动驾驶汽车来说更具挑战性。为了在这种场景中实现鲁棒的定位，出现了许多种方法，如基于GNSS的方法、基于视觉的方法、视觉与惯性结合的方法、基于LiDAR的方法等。基于GNSS的方法能够在开放场景中实现厘米级别的精度，但在有遮挡和多路径的情况下不够可靠。因此提出了融合GNSS与IMU或里程计的方法来解决GNSS的这个问题，但是由于里程计存在漂移的问题，在长时间缺少全局定位信息的场景下依然会失效。为了解决漂移的问题，基于先验图的方法被广泛应用。最常被使用的地图是点云图，能够通过ICP方法或NDT方法实现厘米级的定位，但是点云地图的存储对商用自动驾驶汽车来说是一个巨大的挑战。传统的视觉特征图也被用于定位，但他们会因光照、天气、视角和外观变化而发生跟踪丢失的问题。
* 为了解决这个问题，本文提出了一种在高清地图上提取视觉语义特征并进行定位的方法。与传统的视觉特征相比，语义特征广泛出现在城市道路上并且长期稳定且对光照、视角、季节和外观变化鲁棒。由于语义特征的奇异性、误检和漏检，DA 是最大的挑战之一。 因此，我们提出了一种具有一致 DA 的准确而鲁棒的视觉语义定位系统。 本文的主要贡献总结如下：
  * 一种基于视觉语义特征和轻量级高清地图的准确鲁棒的定位算法，对地图特征没有高精度绝对高度信息的要求。
  * 一种基于局部结构一致性、全局模式一致性以及时间一致性的鲁棒的DA方法来解决DA的奇异性
  * 一个因子图优化框架，它紧密耦合视觉语义测量和里程计测量以实现稳健的定位
  * 在模拟和真实城市道路上进行了大量实验，以验证 DA 的有效性和定位的准确性。

## 2.Related work
### A.基于传统视觉特征的方法
* 基于传统视觉特征的方法提取的是几何特征，如点、线、面等，并通过描述子进行特征匹配。Mul-Artal和 Sons分别用 ORB 和 BIRD 描述子构建特征图，然后通过特征匹配得到姿态。ETH ASL LAB在该领域已完成大量工作，包括多会话地图摘要和基于外观的在线地标选择。 然而，这些方法仍然无法摆脱天气、光照、视角和外观变化的影响。

### B.基于道路语义特征的方法
* 基于道路语义特征的方法广泛应用在自动驾驶汽车上。语义特征包括道路标识、交通灯、交通标志、杆等。Schreiber和Poggenhans检测道路标记和路缘，并通过将特征与地图匹配来定位自动驾驶汽车。Lu应用倒角匹配来构建道路标记的约束，并制定了一个非线性优化问题来估计 6DoF 位姿。Jeong分类了道路标识来避免歧义性，并通过子地图匹配、闭环和位姿图优化实现了精确的定位。Wilbers和Spangenberg通过具有深度的极点实现了姿态估计。 同时，Sefati 融合了来自摄像头和 LiDAR 的道路标记和交通标志，通过 PF 进行定位。 此外，Wu 通过从相机中提取的车道线和从占用网格中提取的 blob 特征进行定位。Ma通过概率直方图滤波融合了INS、GPS、车道线和交通标志的定位结果。 除了道路标线和电线杆外，Kummerle 还通过激光提取建筑物垂直面的几何信息，实现精确定位。
* 本文仅使用单目相机进行定位。但我们不需要绝对高度，而是相对于当前位置路面的高度。 这简化了地图构建的难度，大大降低了成本。

### C.语义数据关联
* 由于语义特征的奇异性、误检和漏检，实现正确和鲁棒的关联极具挑战性。Spangenberg通过欧几里得距离和极点宽度将感知到的极点与地图相关联。 同时，Hu 和 Xiao 应用 RANSAC 来消除不匹配。Kummerle和Wilbers通过随着时间的推移累积检测来构建子图，以解决 DA 的歧义。在目标跟踪领域，执行了匈牙利算法和多重假设跟踪。 为了解决 DA 的奇异性，Bowman 将概率 DA 引入语义 SLAM 系统。 与这些方法相比，我们提出了一种基于局部结构一致性、全局模式一致性和时间一致性的鲁棒 DA 方法，以消除由奇异性引起的失配。

## 3.System Overview
* 全局定位问题可以被定义为：给定一系列传感器测量值${Z = {z_k}^K_{k=1}}$和高清地图${L = {l_m}^M_{m=1}}$，要估计代表状态轨迹的位姿序列${X = {x_t}^T_{t=1}}$。姿态${x_t}$和位姿特征${I_m}$定义为${x_t \in SE(2)}$和${I_m \in R^3}$。定位问题可以被表示为如下的最大后验（MAP）推理问题：
$${\hat{X} = argmax_X p(X|Z, L) \tag{1}}$$
* 最大后验问题可以分成两步，包括DA步骤和基于DA的位姿估计步骤。公式(1)表示的是DA步骤，在进行姿态估计之前，有必要在基于先验姿态${X^0}$的测量和地图之间建立DA ${D = {d_t}^T_{t = 1}}$。 因此，MAP推理问题可以重新定义为：
$${\hat{X}, \hat{D} = argmax_{X, D} p(X, D|Z, L)
= argmax_{X, D} p(X|Z, L, D)p(D|X^0, Z, L)}$$
* 因此，定位框架被分成四个组件，即传感器和地图、检测器、关联和优化。


## 4.METHODOLOGY
### A.语义特征和检测
* 语义特征的选择对定位表现至关重要。在本文中，我们根据参考文献（Accurate and efficient self-localization on roads using basic geometric primitives-ICRA2019）中提出的标准选择特征，因此选择道路标记、电线杆、交通灯和标志进行定位。 它们易于检测、经常出现、记忆效率高、表示形式紧凑、天气、光照、观察和外观不变。


## 5.Experimental Evaluation


## 6.Conclusions
* 本文中我们提出了一个新的语义定位算法，利于从图像中提出的语义特征和高清地图中提出的特征。为了处理由重复结构、漏检和错误检测引起的 DA 的模糊性，执行了一种考虑局部结构、全局模式和时间一致性的鲁棒 DA 方法。 将关联和里程计测量紧密耦合的滑动窗口因子图优化框架旨在实现准确和稳健的定位。 本文所提出的系统经过验证，结果表明所提出的方法实现了亚米级定位精度。
* 未来，我们希望用更全面的理论扩展我们的框架，以实时评估定位性能。 我们还计划检测更多语义特征以提高所提出系统的鲁棒性。